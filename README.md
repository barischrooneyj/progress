# Progress

Modeling region's targets and their progress toward them.

Reading through the data types in [Model.hs](src/Model.hs), 'Region' emerges as
a central data type. Everything is connected to a region, and they can be
connected to each other. Even though the term region invokes ideas of a physical
region, the idea is more broad than that. A region in this model could be quite
abstract, perhaps most generally considered as a set of grouped issues/targets.
Regions have 'Targets' and the 'Progress' they have made towards those targets.

## Developing

First clone the project and update the submodules:

```
git clone git@github.com:barischrooneyj/progress && cd progress
git submodule update --init --recursive
```

Note that initial builds will take a long time as dependencies are installed.

### Backend

Have [Stack](https://docs.haskellstack.org/en/stable/README/#how-to-install)
installed, on macOS you can install Stack with [Homebrew](https://brew.sh/):
`brew install haskell-stack`.

You can build the backend with `stack build`. To build on file changes use
`stack build --file-watch --fast`, or `ghcid` from the `backend` directory to
type check without generating code.

After building you can run the server with `stack exec backend-exe`. Visit
`localhost:8081/region/all` in your browser to see a list of all regions in the
database returned as JSON.

To start an interactive database session use `./interact.sh`. This will land you
in GHCI with the necessary imports and a database setup. More information on
interactive usage and some examples can be found in the
[Tutorial.hs](backend/src/Tutorial.hs).

### Frontend

Building the frontend requires [Nix](https://nixos.org/nix/). Install Nix with:
`curl https://nixos.org/nix/install | sh`.

To build the frontend run `nix-build -o frontend-result -A ghcjs.frontend`. This
will create a symlink called `frontend-result` to a directory containing the
files generated by GHCJS. If the server is running you can view the result at
`localhost:8081/static/index.html`.

For a faster build use GHC `nix-build -o frontend-result-warp -A ghc.frontend`.
Then run the generated executable `frontend-result-warp/bin/frontend-warp-exe`
to serve the frontend at `localhost:3003`.

To type check on file changes first enter the reflex sandbox with
`./reflex-platform/try-reflex`. Then from the `frontend` directory run `ghcid -c
cabal new-repl lib:frontend`.
